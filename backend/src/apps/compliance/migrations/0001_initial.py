# Generated by Django 5.2.1 on 2025-11-05 07:11

import django.contrib.postgres.fields
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('action', models.CharField(db_index=True, max_length=100, verbose_name='action')),
                ('resource_type', models.CharField(db_index=True, max_length=100, verbose_name='resource type')),
                ('resource_id', models.CharField(blank=True, db_index=True, max_length=255, verbose_name='resource ID')),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True, verbose_name='timestamp')),
                ('ip_address', models.GenericIPAddressField(blank=True, db_index=True, null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, verbose_name='user agent')),
                ('location_country', models.CharField(blank=True, max_length=2, verbose_name='country')),
                ('location_city', models.CharField(blank=True, max_length=100, verbose_name='city')),
                ('method', models.CharField(blank=True, max_length=10, verbose_name='method')),
                ('endpoint', models.CharField(blank=True, max_length=500, verbose_name='endpoint')),
                ('request_id', models.UUIDField(blank=True, db_index=True, null=True, verbose_name='request ID')),
                ('reason', models.TextField(blank=True, verbose_name='reason')),
                ('old_values', models.JSONField(blank=True, default=dict, verbose_name='old values')),
                ('new_values', models.JSONField(blank=True, default=dict, verbose_name='new values')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='metadata')),
                ('success', models.BooleanField(db_index=True, default=True, verbose_name='success')),
                ('error_message', models.TextField(blank=True, verbose_name='error message')),
                ('response_code', models.PositiveSmallIntegerField(blank=True, null=True, verbose_name='response code')),
                ('session_id', models.CharField(blank=True, max_length=255, verbose_name='session ID')),
                ('is_suspicious', models.BooleanField(db_index=True, default=False, verbose_name='suspicious')),
                ('risk_score', models.DecimalField(decimal_places=2, default=0, max_digits=5, verbose_name='risk score')),
            ],
            options={
                'verbose_name': 'Audit Log',
                'verbose_name_plural': 'Audit Logs',
                'db_table': 'compliance_audit_logs',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceCheck',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('check_reference', models.CharField(db_index=True, max_length=100, unique=True, verbose_name='check reference')),
                ('check_type', models.CharField(choices=[('exclusion_enforcement', 'Exclusion Enforcement'), ('screening_compliance', 'Screening Compliance'), ('api_integration', 'API Integration'), ('data_protection', 'Data Protection'), ('response_time', 'Response Time'), ('webhook_delivery', 'Webhook Delivery'), ('manual_audit', 'Manual Audit')], db_index=True, max_length=50, verbose_name='check type')),
                ('scheduled_at', models.DateTimeField(blank=True, null=True, verbose_name='scheduled at')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='started at')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='completed at')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('active', 'Active'), ('inactive', 'Inactive'), ('suspended', 'Suspended'), ('expired', 'Expired'), ('revoked', 'Revoked'), ('completed', 'Completed'), ('failed', 'Failed'), ('cancelled', 'Cancelled'), ('processing', 'Processing')], db_index=True, default='pending', max_length=20, verbose_name='status')),
                ('passed', models.BooleanField(db_index=True, default=False, verbose_name='passed')),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, verbose_name='score')),
                ('findings', models.JSONField(blank=True, default=list, verbose_name='findings')),
                ('violations', models.JSONField(blank=True, default=list, verbose_name='violations')),
                ('recommendations', models.TextField(blank=True, verbose_name='recommendations')),
                ('reviewed_at', models.DateTimeField(blank=True, null=True, verbose_name='reviewed at')),
            ],
            options={
                'db_table': 'compliance_checks',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DataRetentionPolicy',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('policy_name', models.CharField(max_length=255, unique=True, verbose_name='policy name')),
                ('data_type', models.CharField(db_index=True, max_length=100, verbose_name='data type')),
                ('retention_period_days', models.PositiveIntegerField(verbose_name='retention period (days)')),
                ('action_after_retention', models.CharField(choices=[('archive', 'Archive'), ('anonymize', 'Anonymize'), ('delete', 'Delete')], max_length=50, verbose_name='action after retention')),
                ('legal_basis', models.TextField(verbose_name='legal basis')),
                ('regulatory_requirement', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), default=list, size=None)),
                ('is_active', models.BooleanField(default=True, verbose_name='is active')),
                ('applies_to_deleted_records', models.BooleanField(default=True, verbose_name='applies to deleted')),
            ],
            options={
                'db_table': 'compliance_data_retention_policies',
            },
        ),
        migrations.CreateModel(
            name='IncidentReport',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('incident_reference', models.CharField(db_index=True, max_length=100, unique=True, verbose_name='incident reference')),
                ('incident_type', models.CharField(choices=[('data_breach', 'Data Breach'), ('unauthorized_access', 'Unauthorized Access'), ('system_failure', 'System Failure'), ('compliance_violation', 'Compliance Violation'), ('fraud_attempt', 'Fraud Attempt'), ('other', 'Other')], db_index=True, max_length=50, verbose_name='incident type')),
                ('severity', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('urgent', 'Urgent'), ('critical', 'Critical')], db_index=True, default='medium', max_length=20, verbose_name='severity')),
                ('title', models.CharField(max_length=255, verbose_name='title')),
                ('description', models.TextField(verbose_name='description')),
                ('affected_users_count', models.PositiveIntegerField(default=0, verbose_name='affected users')),
                ('affected_data_types', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=100), default=list, size=None)),
                ('discovered_at', models.DateTimeField(db_index=True, verbose_name='discovered at')),
                ('reported_at', models.DateTimeField(auto_now_add=True, verbose_name='reported at')),
                ('resolved_at', models.DateTimeField(blank=True, null=True, verbose_name='resolved at')),
                ('status', models.CharField(choices=[('reported', 'Reported'), ('investigating', 'Investigating'), ('contained', 'Contained'), ('resolved', 'Resolved'), ('closed', 'Closed')], db_index=True, default='reported', max_length=20, verbose_name='status')),
                ('immediate_actions', models.TextField(blank=True, verbose_name='immediate actions')),
                ('root_cause', models.TextField(blank=True, verbose_name='root cause')),
                ('remediation_plan', models.TextField(blank=True, verbose_name='remediation plan')),
                ('data_commissioner_notified', models.BooleanField(default=False, verbose_name='data commissioner notified')),
                ('users_notified', models.BooleanField(default=False, verbose_name='users notified')),
            ],
            options={
                'db_table': 'compliance_incident_reports',
                'ordering': ['-discovered_at'],
            },
        ),
        migrations.CreateModel(
            name='RegulatoryReport',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('report_reference', models.CharField(db_index=True, max_length=100, unique=True, verbose_name='report reference')),
                ('report_type', models.CharField(max_length=100, verbose_name='report type')),
                ('reporting_period_start', models.DateField(verbose_name='period start')),
                ('reporting_period_end', models.DateField(verbose_name='period end')),
                ('submitted_to', models.CharField(max_length=100, verbose_name='submitted to')),
                ('submitted_at', models.DateTimeField(blank=True, null=True, verbose_name='submitted at')),
                ('report_data', models.JSONField(default=dict, verbose_name='report data')),
                ('file_url', models.URLField(blank=True, verbose_name='file URL')),
                ('status', models.CharField(default='draft', max_length=20, verbose_name='status')),
            ],
            options={
                'db_table': 'compliance_regulatory_reports',
                'ordering': ['-reporting_period_end'],
            },
        ),
    ]
