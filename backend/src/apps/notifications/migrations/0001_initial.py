# Generated by Django 5.2.1 on 2025-11-05 07:11

import django.contrib.postgres.fields
import uuid
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='EmailLog',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('from_email', models.EmailField(max_length=254, verbose_name='from email')),
                ('to_email', models.EmailField(db_index=True, max_length=254, verbose_name='to email')),
                ('cc_emails', django.contrib.postgres.fields.ArrayField(base_field=models.EmailField(max_length=254), blank=True, default=list, size=None)),
                ('bcc_emails', django.contrib.postgres.fields.ArrayField(base_field=models.EmailField(max_length=254), blank=True, default=list, size=None)),
                ('subject', models.CharField(max_length=255, verbose_name='subject')),
                ('body_text', models.TextField(verbose_name='text body')),
                ('body_html', models.TextField(blank=True, verbose_name='HTML body')),
                ('attachments', models.JSONField(blank=True, default=list, help_text='List of attachment metadata', verbose_name='attachments')),
                ('provider', models.CharField(max_length=50, verbose_name='email provider')),
                ('message_id', models.CharField(blank=True, db_index=True, max_length=255, verbose_name='message ID')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='sent at')),
                ('opened_at', models.DateTimeField(blank=True, null=True, verbose_name='opened at')),
                ('opened_count', models.PositiveIntegerField(default=0, verbose_name='opened count')),
                ('clicked_at', models.DateTimeField(blank=True, null=True, verbose_name='clicked at')),
                ('clicked_count', models.PositiveIntegerField(default=0, verbose_name='clicked count')),
                ('bounced', models.BooleanField(default=False, verbose_name='bounced')),
                ('bounce_reason', models.TextField(blank=True, verbose_name='bounce reason')),
                ('marked_as_spam', models.BooleanField(default=False, verbose_name='marked as spam')),
                ('status', models.CharField(default='pending', max_length=20, verbose_name='status')),
                ('error_message', models.TextField(blank=True, verbose_name='error message')),
            ],
            options={
                'verbose_name': 'Email Log',
                'verbose_name_plural': 'Email Logs',
                'db_table': 'notification_email_logs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('notification_type', models.CharField(choices=[('sms', 'SMS'), ('email', 'Email'), ('push', 'Push Notification'), ('system', 'System Notification'), ('webhook', 'Webhook')], db_index=True, max_length=50, verbose_name='notification type')),
                ('category', models.CharField(choices=[('assessment_reminder', 'Assessment Reminder'), ('exclusion_confirmation', 'Exclusion Confirmation'), ('risk_alert', 'Risk Alert'), ('compliance_notice', 'Compliance Notice'), ('system_alert', 'System Alert')], db_index=True, max_length=50, verbose_name='category')),
                ('priority', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('urgent', 'Urgent'), ('critical', 'Critical')], db_index=True, default='medium', max_length=20, verbose_name='priority')),
                ('title', models.CharField(blank=True, max_length=255, verbose_name='title')),
                ('message', models.TextField(verbose_name='message')),
                ('language', models.CharField(choices=[('en', 'English'), ('sw', 'Swahili'), ('fr', 'French'), ('ar', 'Arabic'), ('pt', 'Portuguese'), ('am', 'Amharic'), ('ha', 'Hausa'), ('yo', 'Yoruba'), ('ig', 'Igbo'), ('zu', 'Zulu'), ('af', 'Afrikaans'), ('pcm', 'Nigerian Pidgin')], default='en', max_length=10, verbose_name='language')),
                ('html_content', models.TextField(blank=True, verbose_name='HTML content')),
                ('attachments', django.contrib.postgres.fields.ArrayField(base_field=models.CharField(max_length=500), blank=True, default=list, help_text='File URLs for attachments', size=None)),
                ('action_url', models.URLField(blank=True, verbose_name='action URL')),
                ('action_label', models.CharField(blank=True, max_length=100, verbose_name='action label')),
                ('recipient_phone', models.CharField(blank=True, max_length=20, verbose_name='recipient phone')),
                ('recipient_email', models.EmailField(blank=True, max_length=254, verbose_name='recipient email')),
                ('device_token', models.CharField(blank=True, max_length=500, verbose_name='device token')),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('queued', 'Queued'), ('sending', 'Sending'), ('sent', 'Sent'), ('delivered', 'Delivered'), ('failed', 'Failed'), ('read', 'Read'), ('cancelled', 'Cancelled')], db_index=True, default='pending', max_length=20, verbose_name='status')),
                ('scheduled_at', models.DateTimeField(blank=True, db_index=True, help_text='When to send notification', null=True, verbose_name='scheduled at')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='sent at')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='delivered at')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='read at')),
                ('expired_at', models.DateTimeField(blank=True, null=True, verbose_name='expired at')),
                ('retry_count', models.PositiveSmallIntegerField(default=0, verbose_name='retry count')),
                ('max_retries', models.PositiveSmallIntegerField(default=3, verbose_name='max retries')),
                ('next_retry_at', models.DateTimeField(blank=True, null=True, verbose_name='next retry at')),
                ('provider', models.CharField(blank=True, help_text='SMS/Email provider used', max_length=50, verbose_name='provider')),
                ('external_id', models.CharField(blank=True, db_index=True, help_text='Provider reference ID', max_length=255, verbose_name='external ID')),
                ('provider_response', models.JSONField(blank=True, default=dict, verbose_name='provider response')),
                ('error_message', models.TextField(blank=True, verbose_name='error message')),
                ('error_code', models.CharField(blank=True, max_length=50, verbose_name='error code')),
                ('is_read', models.BooleanField(db_index=True, default=False, verbose_name='is read')),
                ('is_archived', models.BooleanField(default=False, verbose_name='is archived')),
                ('dismissed_at', models.DateTimeField(blank=True, null=True, verbose_name='dismissed at')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='metadata')),
            ],
            options={
                'verbose_name': 'Notification',
                'verbose_name_plural': 'Notifications',
                'db_table': 'notifications',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='NotificationBatch',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('batch_name', models.CharField(max_length=255, verbose_name='batch name')),
                ('batch_type', models.CharField(choices=[('quarterly_reminder', 'Quarterly Reminder'), ('compliance_notice', 'Compliance Notice'), ('system_announcement', 'System Announcement'), ('custom', 'Custom Campaign')], max_length=50, verbose_name='batch type')),
                ('target_user_ids', django.contrib.postgres.fields.ArrayField(base_field=models.UUIDField(), blank=True, default=list, size=None)),
                ('target_criteria', models.JSONField(blank=True, default=dict, help_text='Filter criteria for recipients', verbose_name='target criteria')),
                ('total_recipients', models.PositiveIntegerField(default=0, verbose_name='total recipients')),
                ('scheduled_at', models.DateTimeField(db_index=True, verbose_name='scheduled at')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='started at')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='completed at')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('scheduled', 'Scheduled'), ('processing', 'Processing'), ('completed', 'Completed'), ('failed', 'Failed'), ('cancelled', 'Cancelled')], db_index=True, default='draft', max_length=20, verbose_name='status')),
                ('sent_count', models.PositiveIntegerField(default=0, verbose_name='sent count')),
                ('delivered_count', models.PositiveIntegerField(default=0, verbose_name='delivered count')),
                ('failed_count', models.PositiveIntegerField(default=0, verbose_name='failed count')),
                ('opened_count', models.PositiveIntegerField(default=0, verbose_name='opened count')),
            ],
            options={
                'verbose_name': 'Notification Batch',
                'verbose_name_plural': 'Notification Batches',
                'db_table': 'notification_batches',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='NotificationPreference',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('is_deleted', models.BooleanField(db_index=True, default=False, help_text='Soft delete flag - data never actually deleted', verbose_name='is deleted')),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when the record was soft deleted', null=True, verbose_name='deleted at')),
                ('deletion_reason', models.TextField(blank=True, help_text='Reason for soft deletion', verbose_name='deletion reason')),
                ('ip_address', models.GenericIPAddressField(blank=True, help_text='IP address of the user who created/updated', null=True, verbose_name='IP address')),
                ('user_agent', models.TextField(blank=True, help_text='Browser/client user agent string', verbose_name='user agent')),
                ('email_enabled', models.BooleanField(default=True, verbose_name='email enabled')),
                ('sms_enabled', models.BooleanField(default=True, verbose_name='SMS enabled')),
                ('push_enabled', models.BooleanField(default=True, verbose_name='push enabled')),
                ('assessment_reminders', models.BooleanField(default=True, verbose_name='assessment reminders')),
                ('exclusion_alerts', models.BooleanField(default=True, verbose_name='exclusion alerts')),
                ('risk_warnings', models.BooleanField(default=True, verbose_name='risk warnings')),
                ('compliance_notices', models.BooleanField(default=True, verbose_name='compliance notices')),
                ('marketing', models.BooleanField(default=False, verbose_name='marketing')),
                ('quiet_hours_enabled', models.BooleanField(default=False, verbose_name='quiet hours enabled')),
                ('quiet_hours_start', models.TimeField(blank=True, null=True, verbose_name='quiet hours start')),
                ('quiet_hours_end', models.TimeField(blank=True, null=True, verbose_name='quiet hours end')),
                ('max_sms_per_day', models.PositiveSmallIntegerField(default=5, verbose_name='max SMS per day')),
                ('max_emails_per_day', models.PositiveSmallIntegerField(default=10, verbose_name='max emails per day')),
            ],
            options={
                'verbose_name': 'Notification Preference',
                'verbose_name_plural': 'Notification Preferences',
                'db_table': 'notification_preferences',
            },
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('template_code', models.CharField(db_index=True, help_text='Unique template identifier (e.g., EXCLUSION_CONFIRM)', max_length=100, unique=True, verbose_name='template code')),
                ('template_name', models.CharField(max_length=255, verbose_name='template name')),
                ('template_type', models.CharField(choices=[('sms', 'SMS'), ('email', 'Email'), ('push', 'Push Notification'), ('system', 'System Notification')], max_length=50, verbose_name='template type')),
                ('category', models.CharField(db_index=True, max_length=50, verbose_name='category')),
                ('subject_en', models.CharField(blank=True, max_length=255, verbose_name='subject (English)')),
                ('subject_sw', models.CharField(blank=True, max_length=255, verbose_name='subject (Swahili)')),
                ('subject_fr', models.CharField(blank=True, max_length=255, verbose_name='subject (French)')),
                ('subject_ar', models.CharField(blank=True, max_length=255, verbose_name='subject (Arabic)')),
                ('body_en', models.TextField(verbose_name='body (English)')),
                ('body_sw', models.TextField(blank=True, verbose_name='body (Swahili)')),
                ('body_fr', models.TextField(blank=True, verbose_name='body (French)')),
                ('body_ar', models.TextField(blank=True, verbose_name='body (Arabic)')),
                ('html_body_en', models.TextField(blank=True, verbose_name='HTML body (English)')),
                ('html_body_sw', models.TextField(blank=True, verbose_name='HTML body (Swahili)')),
                ('variables', models.JSONField(default=list, help_text='Available variables: ["user_name", "exclusion_period", etc.]', verbose_name='variables')),
                ('default_values', models.JSONField(blank=True, default=dict, verbose_name='default values')),
                ('is_active', models.BooleanField(db_index=True, default=True, verbose_name='is active')),
                ('priority', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('urgent', 'Urgent'), ('critical', 'Critical')], default='medium', max_length=20, verbose_name='default priority')),
                ('requires_approval', models.BooleanField(default=False, verbose_name='requires approval')),
                ('usage_count', models.PositiveIntegerField(default=0, verbose_name='usage count')),
                ('last_used_at', models.DateTimeField(blank=True, null=True, verbose_name='last used at')),
            ],
            options={
                'verbose_name': 'Notification Template',
                'verbose_name_plural': 'Notification Templates',
                'db_table': 'notification_templates',
                'ordering': ['template_name'],
            },
        ),
        migrations.CreateModel(
            name='PushNotificationLog',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('device_token', models.CharField(db_index=True, max_length=500, verbose_name='device token')),
                ('device_type', models.CharField(choices=[('ios', 'iOS'), ('android', 'Android'), ('web', 'Web')], max_length=20, verbose_name='device type')),
                ('title', models.CharField(max_length=255, verbose_name='title')),
                ('body', models.TextField(verbose_name='body')),
                ('image_url', models.URLField(blank=True, verbose_name='image URL')),
                ('action_url', models.URLField(blank=True, verbose_name='action URL')),
                ('custom_data', models.JSONField(blank=True, default=dict, verbose_name='custom data')),
                ('provider', models.CharField(max_length=50, verbose_name='push provider')),
                ('message_id', models.CharField(blank=True, max_length=255, verbose_name='message ID')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='sent at')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='delivered at')),
                ('opened_at', models.DateTimeField(blank=True, null=True, verbose_name='opened at')),
                ('dismissed_at', models.DateTimeField(blank=True, null=True, verbose_name='dismissed at')),
                ('status', models.CharField(default='pending', max_length=20, verbose_name='status')),
                ('error_message', models.TextField(blank=True, verbose_name='error message')),
            ],
            options={
                'verbose_name': 'Push Notification Log',
                'verbose_name_plural': 'Push Notification Logs',
                'db_table': 'notification_push_logs',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='SMSLog',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True, help_text='Timestamp when the record was created', verbose_name='created at')),
                ('updated_at', models.DateTimeField(auto_now=True, db_index=True, help_text='Timestamp when the record was last updated', verbose_name='updated at')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, help_text='Globally unique identifier', primary_key=True, serialize=False)),
                ('phone_number', models.CharField(db_index=True, max_length=20, verbose_name='phone number')),
                ('message', models.TextField(verbose_name='message')),
                ('sender_id', models.CharField(max_length=20, verbose_name='sender ID')),
                ('provider', models.CharField(max_length=50, verbose_name='SMS provider')),
                ('message_id', models.CharField(blank=True, db_index=True, max_length=255, verbose_name='message ID')),
                ('sms_count', models.PositiveSmallIntegerField(default=1, verbose_name='SMS count')),
                ('cost_per_sms', models.DecimalField(blank=True, decimal_places=4, max_digits=10, null=True, verbose_name='cost per SMS')),
                ('total_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True, verbose_name='total cost')),
                ('currency', models.CharField(default='KES', max_length=3, verbose_name='currency')),
                ('status', models.CharField(default='pending', max_length=20, verbose_name='status')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='sent at')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='delivered at')),
                ('delivery_status', models.CharField(blank=True, max_length=50, verbose_name='delivery status')),
                ('delivery_error', models.TextField(blank=True, verbose_name='delivery error')),
            ],
            options={
                'verbose_name': 'SMS Log',
                'verbose_name_plural': 'SMS Logs',
                'db_table': 'notification_sms_logs',
                'ordering': ['-created_at'],
            },
        ),
    ]
