# ============================================================================
# NSER Notification System - Environment Configuration
# ============================================================================

# Email Provider Configuration
# Choose ONE: SendGrid (recommended) OR Django SMTP

# ---- OPTION 1: SendGrid (Production Recommended) ----
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.xxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# ---- OPTION 2: Django SMTP (Gmail, Office365, Custom SMTP) ----
# Uncomment to use Django SMTP instead of SendGrid

# Gmail
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.gmail.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=your-email@gmail.com
# EMAIL_HOST_PASSWORD=your-app-specific-password
# Note: For Gmail, generate App Password: https://myaccount.google.com/apppasswords

# Office 365
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.office365.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=your-email@company.onmicrosoft.com
# EMAIL_HOST_PASSWORD=your-password

# Custom SMTP Server
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.your-provider.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=your-username
# EMAIL_HOST_PASSWORD=your-password

# Default FROM email address
DEFAULT_FROM_EMAIL=noreply@grak.go.ke

# ============================================================================
# SMS Configuration - Africa's Talking
# ============================================================================

# Get credentials from: https://africastalking.com/sms/api/
SMS_PROVIDER=africastalking
AFRICASTALKING_USERNAME=GRAK
AFRICASTALKING_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
AFRICASTALKING_SENDER_ID=GRAK

# Alternative naming (for compatibility)
SMS_USERNAME=GRAK
SMS_API_KEY=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
SMS_SENDER_ID=GRAK

# ============================================================================
# Push Notifications - Firebase Cloud Messaging
# ============================================================================

# Path to Firebase service account JSON file
# Generate from: https://console.firebase.google.com/project/{project}/settings/serviceaccounts/adminsdk
FIREBASE_CREDENTIALS_PATH=/path/to/firebase-credentials.json

# Or set the credentials as base64 string (optional)
# FIREBASE_CREDENTIALS_JSON=eyJhhhhh...

# ============================================================================
# Celery Configuration (for async notifications)
# ============================================================================

# Redis (Recommended for production)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Or RabbitMQ
# CELERY_BROKER_URL=amqp://guest:guest@localhost:5672//
# CELERY_RESULT_BACKEND=rpc://

# Or Amazon SQS
# CELERY_BROKER_URL=sqs://access_key:secret_key@

# For development (in-memory, not recommended for production)
# CELERY_BROKER_URL=memory://
# CELERY_RESULT_BACKEND=cache://localhost/

# ============================================================================
# Email Template Configuration
# ============================================================================

# Logo URL for email templates
EMAIL_LOGO_URL=https://grak.go.ke/logo.png

# Company name in email templates
EMAIL_COMPANY_NAME=GRAK NSER

# Support contact information
SUPPORT_EMAIL=support@grak.go.ke
SUPPORT_PHONE=+254 700 000 000
WEBSITE_URL=https://grak.go.ke

# ============================================================================
# Notification Settings
# ============================================================================

# Default notification preferences
DEFAULT_EMAIL_ENABLED=True
DEFAULT_SMS_ENABLED=True
DEFAULT_PUSH_ENABLED=True

# Quiet hours (no notifications during these hours)
# Format: HH:MM (24-hour)
QUIET_HOURS_ENABLED=False
QUIET_HOURS_START=22:00
QUIET_HOURS_END=08:00

# Rate limiting
DEFAULT_MAX_SMS_PER_DAY=5
DEFAULT_MAX_EMAILS_PER_DAY=10

# ============================================================================
# Logging Configuration
# ============================================================================

# Log notification system to file
NOTIFICATION_LOG_FILE=/var/log/grak/notifications.log
NOTIFICATION_LOG_LEVEL=INFO

# ============================================================================
# Testing Configuration
# ============================================================================

# Test email/SMS recipients (for development)
TEST_EMAIL=test@example.com
TEST_PHONE=+254700000000

# ============================================================================
# Advanced Settings
# ============================================================================

# Email retry configuration
EMAIL_RETRY_DELAY=300  # seconds (5 minutes)
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_BACKOFF=2  # exponential backoff factor

# SMS retry configuration
SMS_RETRY_DELAY=60  # seconds
SMS_MAX_RETRIES=3

# Notification cleanup (delete old read notifications after X days)
NOTIFICATION_RETENTION_DAYS=90

# Enable detailed logging
DEBUG_NOTIFICATIONS=False

# ============================================================================
# Production Checklist
# ============================================================================
# Before deploying to production, ensure:
# 1. ✓ SENDGRID_API_KEY or EMAIL_BACKEND is configured
# 2. ✓ AFRICASTALKING_USERNAME and AFRICASTALKING_API_KEY are set
# 3. ✓ FIREBASE_CREDENTIALS_PATH points to valid file
# 4. ✓ CELERY_BROKER_URL is configured for production
# 5. ✓ DEFAULT_FROM_EMAIL is set to valid company email
# 6. ✓ Celery worker is running: celery -A config worker -l info
# 7. ✓ Celery beat is running (for scheduled tasks): celery -A config beat -l info
# 8. ✓ All credentials are in secure environment variables
# 9. ✓ Email and SMS rates are tested
# 10. ✓ Monitoring and alerting is configured
